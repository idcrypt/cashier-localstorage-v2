<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kasir LocalStorage v2</title>
  <link rel="icon" type="image/png" href="assets/logo.png" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.29/dist/jspdf.plugin.autotable.min.js"></script>
  <script>
    // Fallback jika jsPDF CDN gagal dimuat
    window.addEventListener("error", function (e) {
      if (e.target.tagName === "SCRIPT" && e.target.src.includes("jspdf")) {
        console.warn("‚ö†Ô∏è jsPDF CDN gagal dimuat, menggunakan fallback lokal...");
        const local1 = document.createElement("script");
        local1.src = "lib/jspdf.umd.min.js";
        document.head.appendChild(local1);

        const local2 = document.createElement("script");
        local2.src = "lib/jspdf.plugin.autotable.min.js";
        document.head.appendChild(local2);
      }
    }, true);
  </script>
</head>

<body>
  <header>
    <div class="logo">
      <img src="assets/logo.png" alt="Logo" />
      <h1 id="title">Kasir LocalStorage</h1>
    </div>
    <div class="controls">
      <select id="langSelect">
        <option value="id">üáÆüá© Indonesia</option>
        <option value="en">üá¨üáß English</option>
      </select>
      <button id="exportPDF">üìÑ PDF Laporan</button>
    </div>
  </header>

  <main>
    <section id="transaction-section">
      <h2 id="transaction-title">Transaksi Penjualan</h2>
      <form id="salesForm">
        <input type="text" id="itemName" placeholder="Nama Barang" required />
        <input type="number" id="itemQty" placeholder="Qty" required min="1" />
        <input type="number" id="itemPrice" placeholder="Harga Satuan" required min="0" />
        <button type="submit" id="btnAddSale">Tambah</button>
      </form>
      <table id="salesTable">
        <thead>
          <tr>
            <th id="th-item">Barang</th>
            <th id="th-qty">Qty</th>
            <th id="th-price">Harga</th>
            <th id="th-total">Total</th>
            <th id="th-action">Aksi</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="inventory-section">
      <h2 id="inventory-title">Barang Masuk</h2>
      <form id="inventoryForm">
        <input type="text" id="invName" placeholder="Nama Barang" required />
        <input type="number" id="invQty" placeholder="Qty" required min="1" />
        <input type="number" id="invCost" placeholder="Harga Modal" required min="0" />
        <button type="submit" id="btnAddInventory">Tambah</button>
      </form>
      <table id="inventoryTable">
        <thead>
          <tr>
            <th id="inv-item">Barang</th>
            <th id="inv-qty">Qty</th>
            <th id="inv-cost">Modal</th>
            <th id="inv-total">Total</th>
            <th id="inv-action">Aksi</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="expense-section">
      <h2 id="expense-title">Pengeluaran Toko</h2>
      <form id="expenseForm">
        <input type="text" id="expName" placeholder="Nama Pengeluaran" required />
        <input type="number" id="expAmount" placeholder="Nominal" required min="0" />
        <select id="expType">
          <option value="rutin">Rutin</option>
          <option value="mendadak">Mendadak</option>
        </select>
        <button type="submit" id="btnAddExpense">Tambah</button>
      </form>
      <table id="expenseTable">
        <thead>
          <tr>
            <th id="exp-name">Nama</th>
            <th id="exp-type">Tipe</th>
            <th id="exp-amount">Nominal</th>
            <th id="exp-action">Aksi</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="summary-section">
      <h2 id="summary-title">Ringkasan Kas</h2>
      <div class="summary-grid">
        <div><span id="sum-sales-label">Total Penjualan:</span> <strong id="sum-sales">0</strong></div>
        <div><span id="sum-cost-label">Total Modal:</span> <strong id="sum-cost">0</strong></div>
        <div><span id="sum-expense-label">Total Pengeluaran:</span> <strong id="sum-expense">0</strong></div>
        <div><span id="sum-profit-label">Laba/Rugi:</span> <strong id="sum-profit">0</strong></div>
      </div>
    </section>
  </main>

  <footer>
    <p>¬© 2025 Kasir LocalStorage v2 ‚Äî <span id="footer-text">Semua data disimpan di browser Anda.</span></p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
